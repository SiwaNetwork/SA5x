# Log Analysis Demo Files

Этот документ описывает демо файлы для тестирования функции Log Analysis в SA5X Monitor.

## Созданные демо файлы

В папке `uploads/` созданы следующие демо файлы:

1. **`demo_holdover_test.log`** - Основной демо файл в формате CSV с запятыми
2. **`demo_holdover_test_alt.log`** - Альтернативный формат с пробелами
3. **`demo_holdover_test.csv`** - CSV файл с заголовком

## Формат данных

Все файлы содержат данные holdover теста в следующем формате:

```
timestamp,frequency_error,temperature,voltage,current,status
```

Где:
- `timestamp` - время в секундах от начала теста
- `frequency_error` - ошибка частоты в ppm (частей на миллион)
- `temperature` - температура в градусах Цельсия
- `voltage` - напряжение в вольтах
- `current` - ток в амперах
- `status` - статус системы (LOCKED, UNLOCKED, HOLDOVER и т.д.)

## Характеристики демо данных

- **Длительность теста**: 1000 секунд (16.7 минут)
- **Количество измерений**: 101 точка данных
- **Интервал измерений**: 10 секунд
- **Диапазон частотной ошибки**: 1.23e-04 до 1.32e-03 ppm
- **Диапазон температуры**: 25.4°C до 35.4°C
- **Статус**: LOCKED (все измерения)

## Как использовать

### 1. Запуск веб-интерфейса

```bash
cd sa5x_monitor
python3 run_web.py
```

### 2. Открытие веб-интерфейса

Откройте браузер и перейдите по адресу: `http://localhost:8080`

### 3. Тестирование Log Analysis

1. Найдите секцию "Log Analysis" на странице
2. Нажмите "Choose File" и выберите один из демо файлов:
   - `uploads/demo_holdover_test.log`
   - `uploads/demo_holdover_test_alt.log`
   - `uploads/demo_holdover_test.csv`
3. Нажмите "Upload & Analyze"
4. Просмотрите результаты анализа

## Ожидаемые результаты

После загрузки файла вы должны увидеть:

- **Test Overview**:
  - Duration: 1000.00 seconds
  - Measurements: 101

- **Frequency Analysis**:
  - Stability: ~1.2e-04 (стандартное отклонение)
  - Allan Deviation: ~1.2e-04 (1-секундное отклонение Аллана)

- **Temperature Analysis**:
  - Stability: ~3.0°C (стандартное отклонение)
  - Mean Temperature: ~30.4°C

## Тестирование парсера

Для проверки работы парсера без веб-интерфейса:

```bash
python3 simple_log_test.py
```

Этот скрипт проверит все демо файлы и покажет результаты парсинга.

## Форматы файлов

### Формат 1: CSV с запятыми
```
0.0,0.000123,25.5,3.3,0.150,LOCKED
10.0,0.000145,25.6,3.31,0.151,LOCKED
...
```

### Формат 2: Пробелы
```
0.0 0.000123 25.5 3.3 0.150 LOCKED
10.0 0.000145 25.6 3.31 0.151 LOCKED
...
```

### Формат 3: CSV с заголовком
```
timestamp,frequency_error,temperature,voltage,current,status
0.0,0.000123,25.5,3.3,0.150,LOCKED
10.0,0.000145,25.6,3.31,0.151,LOCKED
...
```

## Устранение неполадок

### Файл не загружается
- Убедитесь, что файл имеет правильный формат
- Проверьте, что файл не пустой
- Убедитесь, что файл имеет расширение .log, .txt или .csv

### Ошибка парсинга
- Проверьте формат данных в файле
- Убедитесь, что все строки имеют одинаковое количество полей
- Проверьте, что числовые значения корректны

### Нет результатов анализа
- Убедитесь, что в файле достаточно данных (минимум 2 измерения)
- Проверьте, что временные метки идут в хронологическом порядке

## Создание собственных демо файлов

Для создания собственных демо файлов используйте следующий формат:

```python
# Пример создания демо файла
with open('my_demo.log', 'w') as f:
    f.write("# SA5X Holdover Test Log\n")
    f.write("# timestamp,frequency_error,temperature,voltage,current,status\n")
    
    for i in range(0, 1000, 10):  # каждые 10 секунд
        timestamp = i
        freq_error = 0.0001 + (i * 0.000001)  # линейный дрифт
        temperature = 25.0 + (i * 0.01)  # медленный нагрев
        voltage = 3.3 + (i * 0.001)  # небольшое изменение напряжения
        current = 0.15 + (i * 0.0001)  # небольшое изменение тока
        status = "LOCKED"
        
        f.write(f"{timestamp},{freq_error},{temperature},{voltage},{current},{status}\n")
```

## Поддержка

Если у вас возникли проблемы с Log Analysis:

1. Проверьте логи веб-сервера
2. Убедитесь, что все зависимости установлены
3. Проверьте права доступа к папке uploads/
4. Попробуйте использовать демо файлы для тестирования